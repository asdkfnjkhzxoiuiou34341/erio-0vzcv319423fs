-- blade_ball_script.lua

-- Загружаем библиотеку Soluna
local MacLib = loadstring(game:HttpGet("https://github.com/biggaboy212/Maclib/releases/latest/download/maclib.txt"))()

local Window = MacLib:Window({
    Title = "Blade Ball",
    Subtitle = "Free V1",
    Size = UDim2.fromOffset(868, 650),
    DragStyle = 1,
    DisabledWindowControls = {},
    ShowUserInfo = true,
    Keybind = Enum.KeyCode.RightControl,
    AcrylicBlur = true,
})

-- Создаем вкладки
local MainTab = Window:CreateTab("Main")
local VisualsTab = Window:CreateTab("Visuals")
local SettingsTab = Window:CreateTab("Settings")

-- Основные функции
MainTab:CreateSection("Combat")

local AutoParry = false
MainTab:CreateToggle({
    Name = "Auto Parry",
    Default = false,
    Callback = function(Value)
        AutoParry = Value
        if Value then
            Soluna:Notify("Auto Parry", "Авто-блокировка включена", 3)
            -- Код для авто-блокировки
        else
            Soluna:Notify("Auto Parry", "Авто-блокировка выключена", 3)
        end
    end
})

local PredictionEnabled = false
MainTab:CreateToggle({
    Name = "Ball Prediction",
    Default = false,
    Callback = function(Value)
        PredictionEnabled = Value
        -- Код для предсказания траектории мяча
    end
})

-- Настройки
MainTab:CreateSection("Settings")

local ParryTiming = 0.2
MainTab:CreateSlider({
    Name = "Parry Timing",
    Default = 0.2,
    Min = 0.1,
    Max = 1.0,
    Decimals = 2,
    Callback = function(Value)
        ParryTiming = Value
    end
})

-- Визуальные функции
VisualsTab:CreateSection("ESP")

VisualsTab:CreateToggle({
    Name = "Ball ESP",
    Default = false,
    Callback = function(Value)
        if Value then
            -- Включить ESP мяча
        else
            -- Выключить ESP мяча
        end
    end
})

VisualsTab:CreateToggle({
    Name = "Player ESP",
    Default = false,
    Callback = function(Value)
        if Value then
            -- Включить ESP игроков
        else
            -- Выключить ESP игроков
        end
    end
})

-- Настройки интерфейса
SettingsTab:CreateSection("UI Settings")

SettingsTab:CreateKeybind({
    Name = "Toggle UI Keybind",
    Default = "RightShift",
    Callback = function(Key)
        Window:SetKeybind(Key)
    end
})

SettingsTab:CreateButton({
    Name = "Destroy UI",
    Callback = function()
        Window:Destroy()
    end
})

-- Утилиты
MainTab:CreateSection("Utilities")

MainTab:CreateButton({
    Name = "Rejoin Server",
    Callback = function()
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId)
    end
})

-- Функция для поиска мяча
local function findBall()
    -- Реализация поиска мяча в игре
    -- Нужно адаптировать под конкретную игру
    for _, obj in pairs(workspace:GetChildren()) do
        if obj.Name:find("Ball") or obj.Name:find("Sphere") then
            return obj
        end
    end
    return nil
end

-- Основной цикл для авто-блокировки
if AutoParry then
    task.spawn(function()
        while AutoParry and task.wait() do
            pcall(function()
                local ball = findBall()
                local character = game.Players.LocalPlayer.Character
                
                if ball and character and character:FindFirstChild("HumanoidRootPart") then
                    local distance = (ball.Position - character.HumanoidRootPart.Position).Magnitude
                    
                    if distance < 20 then -- Настрой расстояние срабатывания
                        -- Код для блокировки (нажатие клавиши E)
                        keypress(0x46) -- E key
                        task.wait(ParryTiming)
                        keyrelease(0x46)
                    end
                end
            end)
        end
    end)
end

Soluna:Notify("Blade Ball Utilities", "Меню загружено успешно!", 5)

return "Blade Ball script loaded successfully!"
