-- ===== GUI MODULE =====
-- –ü—Ä–æ—Å—Ç–æ–π GUI –º–æ–¥—É–ª—å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
-- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ ModuleLoader

print("üñ•Ô∏è –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª—å GUI...")

-- –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ —É—Ç–∏–ª–∏—Ç–∞–º –∏ —Å–µ—Ä–≤–∏—Å–∞–º
local Utils = _G.ModuleUtils
local Services = Utils.Services
local Players = Services.Players
local CoreGui = Services.CoreGui
local UserInputService = Services.UserInputService

-- –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç –º–æ–¥—É–ª—è
local GUIModule = {}

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ GUI
local screenGui = nil
local mainFrame = nil

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ GUI
local function createSimpleGUI()
    -- –°–æ–∑–¥–∞–µ–º ScreenGui
    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ModularScriptGUI"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = CoreGui
    
    -- –ì–ª–∞–≤–Ω—ã–π —Ñ—Ä–µ–π–º
    mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 400, 0, 300)
    mainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = screenGui
    
    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = mainFrame
    
    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 40)
    titleLabel.Position = UDim2.new(0, 0, 0, 0)
    titleLabel.Text = "üöÄ Modular Script v" .. _G.BaseConfig.Version
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 16
    titleLabel.TextColor3 = Color3.new(1, 1, 1)
    titleLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    titleLabel.BorderSizePixel = 0
    titleLabel.Parent = mainFrame
    
    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 12)
    titleCorner.Parent = titleLabel
    
    -- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -35, 0, 5)
    closeButton.Text = "√ó"
    closeButton.Font = Enum.Font.GothamBold
    closeButton.TextSize = 18
    closeButton.TextColor3 = Color3.new(1, 1, 1)
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    closeButton.BorderSizePixel = 0
    closeButton.Parent = titleLabel
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeButton
    
    closeButton.MouseButton1Click:Connect(function()
        screenGui.Enabled = false
    end)
    
    -- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ –º–æ–¥—É–ª–µ–π
    local modulesFrame = Instance.new("Frame")
    modulesFrame.Size = UDim2.new(1, -20, 1, -60)
    modulesFrame.Position = UDim2.new(0, 10, 0, 50)
    modulesFrame.BackgroundTransparency = 1
    modulesFrame.Parent = mainFrame
    
    -- –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
    local moduleButtons = {
        {name = "Movement", description = "Fly, NoClip, Speed", color = Color3.fromRGB(100, 150, 255)},
        {name = "Autofarm", description = "Auto Item Collection", color = Color3.fromRGB(255, 150, 100)},
        {name = "YBA", description = "Stand Range Hack", color = Color3.fromRGB(255, 100, 150)},
        {name = "ESP", description = "Player/Item ESP", color = Color3.fromRGB(150, 255, 100)},
        {name = "AntiTimeStop", description = "Anti Time Stop", color = Color3.fromRGB(255, 255, 100)},
        {name = "Teleport", description = "Player Teleport", color = Color3.fromRGB(150, 100, 255)}
    }
    
    for i, moduleData in ipairs(moduleButtons) do
        local moduleButton = Instance.new("TextButton")
        moduleButton.Size = UDim2.new(0.45, 0, 0, 60)
        local column = (i - 1) % 2
        local row = math.floor((i - 1) / 2)
        moduleButton.Position = UDim2.new(column * 0.5 + 0.025, 0, 0, row * 70)
        moduleButton.Text = ""
        moduleButton.BackgroundColor3 = moduleData.color
        moduleButton.BorderSizePixel = 0
        moduleButton.Parent = modulesFrame
        
        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0, 8)
        buttonCorner.Parent = moduleButton
        
        -- –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è
        local nameLabel = Instance.new("TextLabel")
        nameLabel.Size = UDim2.new(1, -10, 0, 25)
        nameLabel.Position = UDim2.new(0, 5, 0, 5)
        nameLabel.Text = moduleData.name
        nameLabel.Font = Enum.Font.GothamBold
        nameLabel.TextSize = 14
        nameLabel.TextColor3 = Color3.new(1, 1, 1)
        nameLabel.BackgroundTransparency = 1
        nameLabel.TextXAlignment = Enum.TextXAlignment.Left
        nameLabel.Parent = moduleButton
        
        -- –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è
        local descLabel = Instance.new("TextLabel")
        descLabel.Size = UDim2.new(1, -10, 0, 20)
        descLabel.Position = UDim2.new(0, 5, 0, 25)
        descLabel.Text = moduleData.description
        descLabel.Font = Enum.Font.Gotham
        descLabel.TextSize = 10
        descLabel.TextColor3 = Color3.new(0.8, 0.8, 0.8)
        descLabel.BackgroundTransparency = 1
        descLabel.TextXAlignment = Enum.TextXAlignment.Left
        descLabel.Parent = moduleButton
        
        -- –°—Ç–∞—Ç—É—Å –º–æ–¥—É–ª—è
        local statusLabel = Instance.new("TextLabel")
        statusLabel.Size = UDim2.new(1, -10, 0, 15)
        statusLabel.Position = UDim2.new(0, 5, 0, 45)
        statusLabel.Text = "‚¨ú Not Loaded"
        statusLabel.Font = Enum.Font.Gotham
        statusLabel.TextSize = 9
        statusLabel.TextColor3 = Color3.new(0.7, 0.7, 0.7)
        statusLabel.BackgroundTransparency = 1
        statusLabel.TextXAlignment = Enum.TextXAlignment.Left
        statusLabel.Parent = moduleButton
        
        -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
        moduleButton.MouseButton1Click:Connect(function()
            statusLabel.Text = "üîÑ Loading..."
            statusLabel.TextColor3 = Color3.new(1, 1, 0)
            
            local success = _G.loadModuleOnDemand(moduleData.name)
            
            if success then
                statusLabel.Text = "‚úÖ Loaded"
                statusLabel.TextColor3 = Color3.new(0, 1, 0)
                print("‚úÖ –ú–æ–¥—É–ª—å", moduleData.name, "–∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!")
            else
                statusLabel.Text = "‚ùå Failed"
                statusLabel.TextColor3 = Color3.new(1, 0, 0)
                print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥—É–ª—å", moduleData.name)
            end
        end)
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–≥—Ä—É–∂–µ–Ω –ª–∏ –º–æ–¥—É–ª—å —É–∂–µ
        if _G.BaseConfig.Modules[moduleData.name] and _G.LoadedModules[_G.BaseConfig.Modules[moduleData.name]] then
            statusLabel.Text = "‚úÖ Loaded"
            statusLabel.TextColor3 = Color3.new(0, 1, 0)
        end
    end
    
    return screenGui
end

-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥—É–ª—è
function GUIModule.create()
    if screenGui then
        print("GUI: GUI —É–∂–µ —Å–æ–∑–¥–∞–Ω")
        return screenGui
    end
    
    screenGui = createSimpleGUI()
    print("‚úÖ GUI —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!")
    return screenGui
end

function GUIModule.show()
    if screenGui then
        screenGui.Enabled = true
        return true
    end
    return false
end

function GUIModule.hide()
    if screenGui then
        screenGui.Enabled = false
        return true
    end
    return false
end

function GUIModule.toggle()
    if screenGui then
        screenGui.Enabled = not screenGui.Enabled
        return screenGui.Enabled
    end
    return false
end

function GUIModule.destroy()
    if screenGui then
        screenGui:Destroy()
        screenGui = nil
        return true
    end
    return false
end

function GUIModule.isVisible()
    return screenGui and screenGui.Enabled or false
end

-- –•–æ—Ç–∫–µ–π –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è GUI
local hotKeyConnection = Utils.safeConnect(UserInputService.InputBegan, function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.Insert then
        GUIModule.toggle()
    end
end)

-- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –º–æ–¥—É–ª—å
_G.GUIModule = GUIModule

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ–º GUI –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è
GUIModule.create()

print("‚úÖ –ú–æ–¥—É–ª—å GUI –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!")
print("üí° –ù–∞–∂–º–∏—Ç–µ Insert –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è GUI")
print("üí° –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: create, show, hide, toggle, destroy")

return GUIModule